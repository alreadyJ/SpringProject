<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="common.first.dao.UserDAO">
    <select id="selectUserWithSerial" parameterType="java.util.HashMap" resultType="hashmap">
        <![CDATA[
            SELECT
                email,
                nickName,
                profileImg
            FROM
                user
            WHERE
                serial = #{serial}
        ]]>
    </select>

    <select id="selectUserExist" parameterType="java.util.HashMap" resultType="hashmap">
        <![CDATA[
            SELECT
                count(*) cnt
            FROM
                user
            WHERE
                email = #{email}
        ]]>
    </select>

    <select id="selectLogin" parameterType="java.util.HashMap" resultType="java.util.HashMap">
        <![CDATA[
            SELECT
                count(*) cnt,
                serial,
                email,
                nickName,
                profileImg,
                signUpDate
            FROM
                user
            WHERE
                email = #{email}
            AND
                password = #{password}
        ]]>
    </select>




    <insert id="insertUser" parameterType="java.util.HashMap">
        <![CDATA[
        INSERT INTO user
        (
            email,
            password,
            nickName,
            profileImg,
            signUpDate
        )
        VALUES
        (
            #{email},
            #{password},
            #{nickName},
            '',
            #{signUpDate}
        )
    ]]>
    </insert>

</mapper>

